<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Previsualizaci贸n de tu Firma</title>

  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: Arial, sans-serif;
      background: #ffffff;
    }

    h1 {
      text-align: center;
      font-size: 28px;
      color: #0a4e29;
      margin-bottom: 25px;
      font-weight: 700;
    }

    .card {
      max-width: 650px;
      margin: auto;
      background: white;
      padding: 25px;
      border-radius: 18px;
      box-shadow: 0 12px 40px rgba(0,0,0,0.12);
      text-align: center;
    }

    .signature-preview {
      width: 100%;
      border-radius: 12px;
      margin-bottom: 20px;
      border: 2px solid #32a150;
      background: white;
    }

    .instructions {
      background: #aed4a7;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      text-align: left;
      color: #0a4e29;
      font-size: 15px;
      border-left: 5px solid #32a150;
    }

    .btn {
      width: 100%;
      padding: 15px;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
      margin-bottom: 12px;
    }

    .btn-download {
      background: #0a4e29;
      color: white;
    }

    .btn-download:hover {
      background: #073b1f;
    }

    .btn-back {
      background: #244d26;
      color: white;
    }

    .btn-back:hover {
      background: #1c3c1d;
    }

    .btn-return-form {
      background: #32a150;
      color: white;
    }

    .btn-return-form:hover {
      background: #278040;
    }
  </style>
</head>
<body>

<h1>Previsualizaci贸n de tu Firma</h1>

<div class="card">

  <img id="signature-img" class="signature-preview" alt="Firma">

  <div class="instructions">
    <b>Instrucciones generales:</b><br>
    Presiona el bot贸n <b>"Descargar Firma"</b> para guardar la imagen en tu dispositivo.
    <br><br>
     En <b>iOS</b>, mant茅n presionada la imagen y selecciona <b>"Guardar en Fotos"</b>.
    <br><br>
    隆Recuerda que necesitar谩s esta firma para completar el formulario de asistencia!
  </div>

  <a id="download-link" download="Firma.jpg">
    <button class="btn btn-download">Descargar Firma (PC, ANDROID)</button>
  </a>

  <button class="btn btn-back" onclick="window.location.href='firmas.html'">
    Volver a firmar
  </button>

  <button class="btn btn-return-form" onclick="volverAlFormulario()">
    Llenar formulario de asistencia
  </button>

</div>

<script>
// Recuperar la firma desde localStorage
const imgData = localStorage.getItem("firma");

// Si no hay firma, evitar pantalla vac铆a
if (!imgData) {
  alert("No se encontr贸 la firma. Por favor, vuelve a generarla.");
  window.location.href = "firmas.html";
}

// Asignar imagen al preview
document.getElementById("signature-img").src = imgData;

// Asignar imagen al bot贸n de descarga
document.getElementById("download-link").href = imgData;

// Enviar al formulario
function volverAlFormulario() {
  window.location.href = "https://forms.office.com/r/Y587tcMmyY";
}
</script>

</body>
</html>
